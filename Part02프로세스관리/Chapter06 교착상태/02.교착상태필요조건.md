# Chapter06 교착상태 [2.교착상태필요조건] 

<br>

### 교착상태 필요조건

   - 교착상태 필요조건
      - 교착상태는 여러가지 조건에 의해 발생되며, 교착상태는 상호배제, 비선점, 점유와 대기, 원형 대기를 모두 충족해야함
      - 상호 배제(Mutual Exclusion) : 자원은 다른 프로세스와 공유할 수 없는 배타적인 자원이어야 하며 자원은 임계구역으로 보호되기 때문에 한 번에 한 프로세스만이 사용할 수 있어야 한다.한 리소스는 한번에 한 프로세스만이 사용 할 수 있음.

      - 비선점 (No preemption) : 한 프로세스가 사용 중인 자원은 중간에 다른 프로세스가 빼앗을 수 없는 비선점 자원이어야 하며 다른 프로세스에 할당된 자원은 사용이 끝날 때까지 강제로 빼앗을 수 없어야 한다. 프로세스가 테스크를 마친 후 리소스를 자발적으로 반환할 때 까지 기다림.

      - 점유 대기 (Hold and Wait) : 최소한 하나의 자원을 점유하고 있으면서 다른 프로세스에 할당되어 사용되고 있는 자원을 추가로 점유하기 위해 대기하는 프로세스가 있어야 한다.
      즉, 이미 자원을 사용중인데, 다른 프로세스가 사용중인 자원을 사용하기 위해 대기하고 있는 상태의 프로세스가 존재해야 한다. 

      - 원형 대기 / 순환 대기 (Circular wait) : 프로세스가 특정 자원에 대해 점유와 대기를 한다고 교착 상태에 빠지는것이 아니라 점유와 대기를 하는 프로세스들이 서로 방해하는 방향이 원을 이루면 교착상태가 발생한다. 

      상호배제와 비선점 조건은 자원의 특성을 나타내며, 점유와 대기, 원형 대기 조건은 프로세스가 어떤 행위를 하고 있는지를 나타냄 

   - 식사하는 철학자 문제와 교착 상태 필요조건
   
      - 철학자는 프로세스, 포크는 자원
      - 식사하는 철학자 문제는 교착상태(Deadlock)의 대표적인 예제이다.위의 상황을 프로그램으로 만들어 실행하면 잘 돌아가다가 어느순간 멈춰버리는 것을 확인할 수 있는데, 그 이유는 식사하는 철학자 문제가 데드락 발생의 4가지 필요조건을 모두 만족하고 있기 때문이다. 만약 모든 철학자가 동시에 배가 고파서 왼쪽 포크를 집어든다면 어떻게 될까? 오른쪽 포크는 이미 자신의 우측에 앉은 철학자가 집어들었을 것이므로, 모두가 영원히 오른쪽 포크를 들지 못하게 된다. 그렇게 상단 과정의 2번에서 더이상 진행하지 못하고 철학자들은 영원히 생각에 빠지게 되는데, 이런 현상을 컴퓨터과학에선 교착상태(Deadlock)라고 한다. 한번 교착상태에 빠진 철학자들은 계속 고뇌만 하다가 기아현상(Starvation)으로 굶어 죽는다.    

      - 상호배타(Mutual Exclusion) : 포크는 한번에 한 철학자만 사용할 수 있다.
      - 비선점(No Preemption) : 이미 누군가 집어든 포크를 강제로 뺏을 수 없다.
      - 점유 및 대기(Hold and Wait) : 집어든 포크는 계속 들은 채로 사용중인 반대쪽 포크를 기다린다.
      - 환형대기(Circular Wait) : 모든 철학자들이 자신의 오른쪽에 앉은 철학자가 포크를 놓기를 기다린다.

   - 교착상태와 아사 현상
      - 아사현상 : 정책상 잘못이나 오류로 인해 특정 프로세스의 작업이 이루어지지 않는 것 >> 에이징 현상으로 해결 가능
      - 아사현상과 달리 정책상의 잘못이나 오류가 없어도 자연적으로 발생 


​
   

      

   



``` 