# Chapter10 입출력 시스템과 저장장치 [02.디스크장치] 

<br>

### 디스크 장치 

<h3>1.  디스크 장치의 종류 </h3>
   <b>1.1 하드디스크</b>
   
   - 1956년 처음 개발될 당시 23인치의 교탁만 한 거대한 크기에 용향은 5MB 정도 였음
   - 당시에는 순차적으로 접근하는 저장장치 밖에 없었으나 하이디스크는 원반을 사용한 저장장치로, 맨 앞에 있는 데이터나 맨 뒤에 있는 데이터에 접근하는 속도가 거의 비슷하여 수많은 시스템에서 도입하기 시작함
   
   - 하드디스크 의 구조

   ![하드디스크구조](https://user-images.githubusercontent.com/93310395/196616453-27d44f92-e4a6-4b37-bce2-ec3bdf7779c4.JPG)

   - 플래터 : 표면에 자성체가 발려 있어 자기를 이용하여 0과 1의 데이터를 저장 
      - 플래터의 표면이 N극 0, S극이면 1
      - 플래터의 수는 하드디스크마다 다르며, 보통 2장 이상으로 구성되며 항상 일정한 속도로 회전
      - 하드디스크 사양 7,500rpm : 플래터가 1분에 7,500바퀴를 일정한 속도로 회전
   - 섹터와 블록 
      - 섹터 : 물리적인 개념인 섹터는 하드디스크의 가장 작은 저장 단위이며, 하나의 섹터에는 한덩어리의 데이터가 저장
      - 블록 : 하드디스크와 컴퓨터 사이에 데이터를 전송하는 논리적인 저장 단위 중 가장 작은 단위, 블록은 여러 섹터로 구성되며 윈도우 운영체제에서는 블록 대신 클러스터라고도 함
   즉, 하드디스크 입장에서는 섹터가 가장 작은 저장 단위이지만, 운영체제 입장에서는 하드디스크에 데이터를 보내거나 받을 때 블록이 가장 작은 저장 단위임 
   - 트랙과 실린더
      - 트랙 : 플래터에서 회적축을 중심으로 데이터가 기록되는 동심원, 즉 동일한 동심원상에 있는 섹터의 집합
      - 실린더 : 여러 개의 플래터에 있는 같은 트랙의 집합을 실린더라고 함

   ![헤드 플래터](https://user-images.githubusercontent.com/93310395/196616459-0062f99b-1718-41a7-8ba4-0ee43ab15aad.JPG)

   - 헤드와 플래터
      - 헤드 : 하드디스크에서 데이터를 읽거나 쓸 때는 읽기/쓰기 헤드를 사용
      - 헤드의 수는 데이터가 저장되는 플래터의 표면 수와 같음
      - 플래터가 회전을 시작하면 표면에 약한 바람이 일어나고 헤드는 이 바람에 의해 표면에서 떠 있는 형태로 작동하며 여기서 헤드가 플래터에 붙어버리면 상처가 생기는데 이것을 '배드 섹터'라고 함 
      - 파킹 : 컴퓨터가 종료될 때 헤드가 플래터의 표면에 흠집내지 않도록 하드디스크가 헤드를 데이터가 저장되지 않는 플래터의 맨 바깥쪽으로 이동시키는 것  

   <b>1.2 CD</b>

   - 하드디스크처럼 원반을 사용하는 저장장치 중 대중화되었으며, 휴대할 수 있는 소형 원반에 데이터를 저장함 
   - 하드디스크와 마찬가지로 트랙과 섹터로 구성되며, 수평으로 움직이는 헤드가 트랙 사이를 움직이면서 데이터를 읽음
   - cd는 표면에 미세한 홈이 파여 있어 헤드에서 발사된 레이저가 홈에 들어가 반사되지 않으면 0, 반사되면 1로 데이터를 읽음

   <b>1.3 하드디스크와 CD</b> 

   ![회전 비교](https://user-images.githubusercontent.com/93310395/196614099-d2aff43e-1a8c-4384-b046-145012c2c41b.png)

   - 회전 비교
      - 각속도 일정 방식의 회전 : 하드디스크의 플래터는 항상 일정한 속도로 회전하여 바깥쪽 트랙의 속도가 안쪽 트랙의 속도보다 빠름
      - 선속도 일정 방식의 회전 : CD 경우 어느 트랙에서나 단위 시간당 디스크의 이동거리가 같은데, 이를 구현하려면 헤드가 안쪽 트랙에 있을 때는 디스크 회전 속도를 빠르게 하고, 헤드가 바깥쪽 트랙으로 이동했을 때는 디스크 회전 속도를 느리게 함
   - 섹터 비교
      - 각속도 일정 방식의 섹터: 하드디스크는 트랙마다 속도가 다르기 때문에 섹터의 크기도 다르며, 모든 트랙의 섹터 수가 같고 바깥쪽 섹터의 크기가 안족 섹터보다 큼 
         - 단점 : 안쪽 트랙에 비해 바깥쪽 트랙으로 갈수록 낭비되는 공간의 크기가 커짐
         - 장점 : 디스크가 일정한 속도로 회전하기 때문에 구동 장치가 단순하고 조용하게 작동
      - 선속도 일정 방식의 섹터 : CD는 모든 트랙의 움직이는 속도가 같고 섹터의  크기도 같음 따라서 안쪽 트랙보다 바깥쪽 트랙에 더 많은 섹터가 존재함 
         - 단점 : 모터 제어가 복잡하고 소음이 발생    
         - 장점 : 한정된 공간에 많은 데이터를 담을 수 있고 바깥쪽 트랙의 섹터 공간의 낭비 문제 적음  
   - 성능 표시 
      - CD는 트랙마다 회전하는 속도가 다르기 때문에 rpm으로 표시 불가능하여 최초로 만들어진 CD_ROM을 기준으로 표시 
   - 데이터 저장 순서
      - 하드디스크는 바깥쪽에서 안쪽으로 데이터가 채워지며, CD는 안쪽에서부터 바깥쪽으로 데이터가 채워짐

<h3>2.  디스크 장치의 데이터 전송 시간 </h3>        

   ![전송 과정](https://user-images.githubusercontent.com/93310395/196614109-b2789a1a-4c0a-4ede-ac9f-3812aea3bae8.JPG)

   - 데이터 전송 시간 = 탐색시간 + 회전 지연시간 + 전송 시간
      - 탐색시간 : 헤드가 현재 위치에서 그 트랙까지 이동하는 데 걸리는 시간
      - 회전 지연 시간 : 특정 트랙까지 이동한 헤드는 플래터가 회전하여 원하는 섹터를 만날때까지 회전하는 데 걸리는 시간
      - 전송 시간 : 헤드는 원하는 섹터에 있는 데이터를 읽어 전송하는데, 이때 걸린 시간

<h3>3.  디스크 장치 관리 </h3>   
    <b>3.1 파티션</b> 

   ![파티션](https://user-images.githubusercontent.com/93310395/196614112-66fd3bc4-9eb2-454d-8274-f560971744be.JPG)
         
   - 디스크를 논리적으로 분할하는 작업이며 파티션 하나에 하나의 파일 시스템이 탑재됨 
   - 하드디스크가 2개라면 첫 번째 하드디스크와 두 번째 하드디스크가 별도의 파티션으로 보임
   - 대용량 하드디스크의 경우 하나로 사용하기보다 여러 개로 나누어 사용하면 관리하기가 편함
   - 여러 개의 하드디스크를 하나의 파티션으로 통합하여 사용하기도 함
   - 마운트(mount) : 유닉스 운영체제에서 여러 개의 파티션을 하나로 통합하는 기능

   <b>3.2 포메팅</b> 
   
   - 파티션이 결정되면 이루어지는 작업이며 디스크에 파일 시스템을 탑재하고 디스크 표면을 초기화하여 사용할 수 있는 형태로 만드는 작업
   - 저장장치도 페이지 테이블을 사용하는 것과 마찬가지로 디스크에 저장된 파일의 위치와 크기 정보를 담고 있는 파일 테이블을 사용함 
   - 빈 저장장치에 파일 테이블을 탑재하는 작업이 '포매팅' 임 
   - 빠른 포매팅과 느린 포매팅
      - 하드디스크를 처음 사용할 때는 느린 포매팅을 하고, 하드디스크를 사용하다가 다시 포매팅을 해야 할 때는 빠른 포매팅을 하면 됨
         - 빠른 포매팅 : 데이터는 그대로 둔 채 파일 테이블을 초기화하는 방식
         - 느린 포매팅 : 디스크에 파일 시스템을 탑재하고 디스크 표면을 초기화하는 방식


   <b>3.3 조각모음</b> 

   ![조각 모음](https://user-images.githubusercontent.com/93310395/196614114-373a5d2a-9ee0-424d-8c33-4497bc505c9a.JPG)

   - 수정 및 삭제로 인한 단편화 생성 : 하드디스크에 조각이 많이 생기면 큰 파일이 여러 조각으로 나뉘어 저장되고 이를 읽기 위해 하드디스크의 여러 곳을 돌아다녀야 하기 때문에 성능 저하로 이어짐 
   - 때문에 하드 디스크는 주기적으로 조각 모음을 해주어야 함
   - USB 메모리나 SSD와 같은 반도체를 이용한 저장장치는 조각 모음을 하지 않아도 성능차이가 없기 때문에 따로 하지 않아도 되며,  조각 모음을 하여 특정 위치의 메모리만 사용하여 수명이 단축되지만 반도체를 이용한 저장장치는 전체 공간을 고루 사용하기 때문에 수명 연장에 도움

<h3>4.  네트워크 저장 장치 </h3>        

   - 네트워크를 사용하는 저장장치는 어떻게 구성하느냐에 따라 DAS, NAS, SAN으로 구분됨

  <b>4.1 DAS</b>
   - DAS / HAN : 서버와 같은 컴퓨터에 직접 연결된 저장장치
   - 윈도우 파일 공유가 대표적 
   - 컴퓨터의 메인보드에 있는 입출력 버스와 연결되어 있고, IDE, E-IDE를 거쳐 현재는 SATA 방식을 사용
   - USB 또는 Firewrie(IEEE1394)를 이용하여 외부 저장장치와 컴퓨터 내부 버스를 연결

   <b>4.2 NAS</b>
   - NAS : 기존의 저장 장치를 LAN이나 WAN에 붙여서 사용하는 방식
   - NAS 전용 운영체제를 가진 독립장치로 새로운 라드디스를 추가하거나 뺄 수 있음
   - 저장장치를 네트워크 상에 두고 여러 클라이언트가 네트워크를 통해 접근하게 함으로써 공유 데이터 관리함 

   <b>4.3 SAN</b>

   - SAN : 데이터 서버, 백업 서버, RAID 등의 장치를 네트워크로 묶고 데이터 접근을 위한 서버를 두는 형태
   - NAS가 저장장치에 네트워크 인터페이스를 부작했다면, SAN은 데이터서버, 백없 서버, RAID 등의 장치를 네트워크로 묶고 데이터 접근을 위한 서버를 두는 형태
   - 편리하다는 장점이 있으나 데이터 서버나 백업 서버를 같이 구축하기 때문에 NAS보다 비용이 많이 듬
   - 광채널 이용구성 : FC-SAN, TCP/IP프로트콜 이용 : IP-SAN